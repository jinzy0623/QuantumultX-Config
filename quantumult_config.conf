# Quantumult X 配置 - 最终毕业版
# 日期：2025/06/26
# 修正了所有已知语法错误和逻辑冲突，实现了性能与稳定性的统一。

[general]
dns_exclusion_list = localhost, *.local, *.localnetwork.uop, *.cmpassport.com, *.pingan.com, *.cmbchina.com, *.abchina.com, *.icbc.com.cn
excluded_routes = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 17.0.0.0/8
network_check_url = http://connectivitycheck.platform.hicloud.com/generate_204
server_check_url = http://cp.cloudflare.com/generate_204
geo_location_checker = http://ip-api.com/json/?lang=zh-CN, https://github.com/KOP-XIAO/QuantumultX/raw/master/Scripts/IP_API.js

[dns]
# [优化] DNS部分保持简洁，仅保留基础服务器。域名分流由filter模块处理。
no-ipv6
no-system
server = 223.5.5.5
server = 119.29.29.29
server = 8.8.8.8
server = 1.1.1.1
address = /mtalk.google.com/108.177.125.188

[http_backend]
https://raw.githubusercontent.com/chavyleung/scripts/master/box/chavy.boxjs.js, tag=BoxJs, path=^/, enabled=false

[policy]
static=BiliBili, direct, proxy, reject
static=GlobalMedia, direct, proxy, reject
static=Apple, direct, proxy, reject
static=Microsoft, direct, proxy, reject
static=大陆服务, direct, proxy, reject
# [优化] 已清理所有未被引用的冗余策略组，结构清晰。
url-latency-benchmark = 自动优选, server-tag-regex=^(?!.*(解锁|网易云)), tolerance=100, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/URL-Test.png
static = 节点选择, 自动优选, PROXY
static = 广告屏蔽, REJECT
static = Streaming, 节点选择
static = StreamingCN, DIRECT
static = 港台番剧, 节点选择
static = AI服务, server-tag-regex=(?i)美国|US|AI, 节点选择
static = 网易云音乐, server-tag-regex=(?i)网易云|Netease|音乐, 节点选择
static = 苹果服务, DIRECT, 节点选择
static = 微软服务, DIRECT, 节点选择



[server_local]
# 请在此处添加你的本地服务器节点

[server_remote]
# [保留] 已保留您原有的节点订阅链接。
https://scdy03.scsub.com/apiv2/39dtqnukkwbrpmwb?quantumult=1&extend=1, tag=speedcat, update-interval=172800, enabled=true
https://sub1.sntp.dev/baseStr?token=f0c8998929f111dd57f31c248a159b34&timestamp=119223, tag=奇心科技, update-interval=86400, enabled=true
https://nav.qixinpro.com/rules/QuantumultX/gz/wyy.list, tag=网易云解锁, update-interval=86400, enabled=true

[filter_remote]
# [优化] 规则库已统一为 blackmatrix7 的现代化规则，并分离了国内外流媒体。
https://raw.githubusercontent.com/NobyDa/ND-AD/master/QuantumultX/AD_Block_Plus.txt, tag=广告屏蔽, policy=广告屏蔽, update-interval=86400, opt-parser=false, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/GlobalMedia/GlobalMedia.list, tag=Streaming, policy=Streaming, update-interval=86400, opt-parser=false, enabled=true
https://nav.qixinpro.com/rules/QuantumultX/gz/mainland.list, tag=StreamingCN, policy=StreamingCN, update-interval=86400, opt-parser=false, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/BiliBili/BiliBili.list, tag=港台番剧, policy=港台番剧, update-interval=86400, enabled=true
https://nav.qixinpro.com/rules/QuantumultX/gz/netease.list, tag=网易云音乐, policy=网易云音乐, update-interval=86400, opt-parser=false, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Apple/Apple.list, tag=苹果服务, policy=苹果服务, update-interval=86400, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Microsoft/Microsoft.list, tag=微软服务, policy=微软服务, update-interval=86400, enabled=true

[filter_local]
host-suffix, local, direct
geoip, cn, direct

# 为AI服务指定专门的策略组
host-suffix, openai.com, AI服务
host-suffix, chat.openai.com, AI服务
host-suffix, gemini.google.com, AI服务

# [性能优化] 禁用QUIC协议，解决YouTube视频加载缓慢问题。已修正为更高效的写法。
domain-keyword, googlevideo, reject
domain-keyword, youtube.com, reject

final, 节点选择

[rewrite_remote]
https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.quanx.conf, tag=BoxJs, enabled=true
https://nav.qixinpro.com/rules/QuantumultX/gz/bilibili.conf, tag=哔哩哔哩, enabled=true
https://raw.githubusercontent.com/zwf234/rules/master/QuantumultX/price.conf, tag=比价, enabled=true
https://raw.githubusercontent.com/zwf234/rules/master/TikTok/US.conf, tag=解锁TikTok, enabled=true

[rewrite_local]
# 请在此处添加你的本地复写规则

[task_local]
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/geo_location.js, tag=GeoIP 查询, enabled=true
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/streaming-ui-check.js, tag=流媒体解锁查询, enabled=true
event-interaction https://raw.githubusercontent.com/I-am-R-E/QuantumultX/main/TaskLocal/NeteaseMusicUnlockCheck.js, tag=网易音乐查询, enabled=true

[mitm]
# [安全提示] 您的配置中移除了私钥是正确的做法。请确保您已在App内生成并信任自己的证书。
hostname = *.jd.com, *.jcloud.com, *.coolapk.com, api.coolapk.com, *.iqiyi.com, *.iq.com, *.bilibili.com, api.bilibili.com, upos-sz-mirror*.bilivideo.com, music.163.com, *.music.126.net